---
title: " الإشعارات"
sidebar_position: 4
---
# إنشاء إشعارات المستخدم
## إرسال إشعار داخلي {#internal-notifications}
بعد أن تم إنشاء نظام إدارة المهام [هنا](./creating-module.md)، لنفترض أنه قد جاءنا طلب تعديله بحيث نضيف إشعار داخلي للمستخدم في حالة إسناد مهمة جديدة له. لتنفيذ ذلك سنتبع الخطوات التالية:

#### 1. انتقل إلى الكيان المعني:
   ابدأ بالانتقال إلى كيان المهام [هنا](./creating-entity.md) الذي سنقوم بإضافة التفاعل عليه.

#### 2. الدخول إلى وضع التعديل:
   قم بالتبديل إلى وضع التعديل من خلال النقاط الثلاث أو من القائمة في الزاوية العليا، نقوم باختيار **تعديل الكيان**.

#### 3. التوجه إلى تبويبة "التفاعلات":
   
#### 4. إضافة تفاعل جديد:
   انقر على زر **"+"** أو **"إضافة تفاعل"**، لبدء إضافة تفاعل جديد.

#### 5. ملء نموذج التفاعل:
   سيظهر نموذج "التفاعلات" الجديد على شاشة منبثقة. قم بملء الحقول التالية:

   - **المشغل:** قم بتحديد اسم للتفاعل الخاص بك لتمييزه عن غيره من التفاعلات، في هاته الحالة مثلا: **"إرسال إشعار للمستخدم عند إسناد مهمة جديدة إليه"**.
   - **الحدث:** حدد نوع الحدث الذي ستتم استجابته تلقائيًا، في هاته الحالة : **"عند إنشاء مدخل جديد"**.
   - **الترشيح:** اختياريًا، إذا كان التفعيل يدعم المُرشحات، يمكنك تحديد الشروط الاختيارية التي تحدد متى ينبغي تنفيذ التفاعل، **في هاته الحالة لسنا بحاجة إليه**.
   - **الإجراء:** اختر **"إرسال إشعار"** كإجراء لتنفيذه عند وقوع الحدث.

#### 6. إضافة تفاصيل الإشعار:
   عند اختيار **"إرسال إشعار"** كإجراء، سيتم عرض حقول إضافية لإدخال تفاصيل الإشعار.

   - **الوحدة:** حقل مغلق يحتوي على قيمة افتراضية تلقائية وهي اسم الوحدة الحالية.
   - **الأيقونة:** يمكنك تغيير الأيقونة المعروضة للإشعار.
   - **نوع القناة:** في هذه الحالة، سيكون نوع القناة **"داخلي"** (Internal Channel).
   - **العنوان:** ادخل عنوان الإشعار الذي ترغب في إرساله. في هاته الحالة مثلا: **"مهمة جديدة"**
   - **المحتوى:** ادخل محتوى الإشعار الذي ترغب في إرساله. في هاته الحالة مثلا: **"{{x}} قام بإسناد مهمة جديدة لك"**

   **ملاحظة:** يمكنك إضافة متغيرات خاصة في العنوان والمحتوى من خلال كتابة اسم المتغير بين علامتي الأقواس المزدوجة {{}} (في هاته الحالة لدينا : {{x}}) بعد ذلك، سيظهر قسم آخر بالأسفل يسمح لك باختيار حقل قيمة للمتغير من حقول الكيان أو البيانات الوصفية أو مالك الخطوة الحالية (إذا كان هناك سير العمل). قم بتحديد خيار **"الإنشاء بواسطة"** الموجود ضمن قسم البيانات الوصفية في القائمة.

   **ملاحظة:** يُرجى عدم نسيان إضافة الترجمة للعنوان والمحتوى من خلال النقر على الأيقونة الموجودة في نهاية حقل الإدخال لعرض نافذة منبثقة تحتوي على حقول لإدخال النص باللغة العربية والإنجليزية.

#### 7. تحديد المستلمين:
   قسم المستلمين يسمح لك بتحديد مستلمي الإشعار، من خلال ملأ الحقول التالية:

   - **المصدر:** يمكنك تحديد المصدر من بين خيارات: مستخدم (User)، مجموعة (Group)، أو قائمة (Collection). في هاته الحالة سنحدد خيار **"مستخدم"**.
   - **النوع:** يمكنك اختيار إما مستلم ثابت (Fixed) أو مستلم متغير (Dynamic). في هاته الحالة حدد خيار **"متغير"**
   - **القيمة:** ستتاح لك قائمة بحقول الكيان والبيانات الوصفية لاختيار المستلم. في هاته الحالة قم بتحديد خيار **المسؤول** كما هو موجود في بنية الكيان.

#### 8. إضافة التفاعل:
   بمجرد إكمال ملء نموذج التفاعل وتفاصيل الإشعار وتحديد المستلمين، انقر على الزر الموجود في نهاية النموذج لإضافة التفاعل. سيتم إضافة التفاعل إلى قائمة التفاعلات، لكنه لم يتم حفظه بعد.

#### 9. حفظ التفاعل:
   لحفظ التفاعل الجديد، قم بالتنقل إلى الجزء العلوي من صفحة التحرير وانقر على زر "حفظ" لحفظ جميع التغييرات التي قمت بها في  قسم "التفاعلات" بما في ذلك التفاعل الجديد.

## إرسال إشعار خارجي {#external-notifications}
بعد أن تم إنشاء نظام إدارة المهام [هنا](./creating-module.md)، لنفترض أنه قد جاءنا طلب تعديله بحيث نضيف إشعار خارجي، 
لإرسال بريد إلكتروني للمستخدم في حالة إسناد مهمة جديدة له. لتنفيذ ذلك سنتبع الخطوات التالية:

#### 1. انتقل إلى الكيان المعني:
   ابدأ بالانتقال إلى كيان المهام [هنا](./creating-entity.md) الذي سنقوم بإضافة التفاعل عليه.
#### 2. الدخول إلى وضع التعديل:
   قم بالتبديل إلى وضع التعديل من خلال النقاط الثلاث أو من القائمة في الزاوية العليا، نقوم باختيار **تعديل الكيان**.
#### 3. التوجه إلى تبويبة "التفاعلات":
#### 4. إضافة تفاعل جديد:
   انقر على زر **"+"** أو **"إضافة تفاعل"**، لبدء إضافة تفاعل جديد.
#### 5. ملء نموذج التفاعل:
   سيظهر نموذج "التفاعلات" الجديد على شاشة منبثقة. قم بملء الحقول التالية:
   - **المشغل:** قم بتحديد اسم للتفاعل الخاص بك لتمييزه عن غيره من التفاعلات، في هاته الحالة مثلا: **"إرسال بريد إلكتروني للمستخدم عند إسناد مهمة جديدة إليه"**.
   - **الحدث:** حدد نوع الحدث الذي ستتم استجابته تلقائيًا، في هاته الحالة : **"عند إنشاء مدخل جديد"**.
   - **الترشيح:** اختياريًا، إذا كان التفعيل يدعم المُرشحات، يمكنك تحديد الشروط الاختيارية التي تحدد متى ينبغي تنفيذ التفاعل، **في هاته الحالة لسنا بحاجة إليه**.
   - **الإجراء:**  لإرسال إشعار خارجي اختر *"إرسال بريد الكتروني"* كإجراء لتنفيذه عند وقوع الحدث.

#### 6. إضافة تفاصيل الإشعار:
   عند اختيار **"إرسال بريد الكتروني"** كإجراء، سيتم عرض حقول إضافية لإدخال تفاصيل الإشعار.
   - **الموضوع:** ادخل عنوان البريد الإلكتروني الذي ترغب في إرساله. في هاته الحالة مثلا: **"مهمة جديدة"**
   - **المحتوى:** ادخل محتوى البريد الإلكتروني الذي ترغب في إرساله. في هاته الحالة مثلا: **"{{x}} قام بإسناد مهمة جديدة لك"**
   **ملاحظة:** يمكنك إضافة متغيرات خاصة في الموضوع والمحتوى من خلال كتابة اسم المتغير بين علامتي الأقواس المزدوجة {{}} (في هاته الحالة لدينا : {{x}}) بعد ذلك، سيظهر قسم آخر بالأسفل يسمح لك باختيار حقل قيمة للمتغير من حقول الكيان أو البيانات الوصفية أو مالك الخطوة الحالية (إذا كان هناك سير العمل). قم بتحديد خيار **"الإنشاء بواسطة"** الموجود ضمن قسم البيانات الوصفية في القائمة.
     
### 7. تحديد المستلمين:
قسم المستلمين يسمح لك بتحديد مستلمي الإشعار، من خلال ملأ الحقول التالية:
- **المصدر:** يمكنك تحديد المصدر من بين خيارات: مستخدم، مجموعة، أو قائمة. في هذه الحالة سنحدد خيار **"مستخدم"**.
- **النوع:** يمكنك اختيار إما مستلم ثابت أو مستلم متغير. في هذه الحالة حدد خيار **"متغير"**.
- **القيمة:** ستتاح لك قائمة بحقول الكيان والبيانات الوصفية لاختيار المستلم. في هذه الحالة قم بتحديد خيار **المسؤول** كما هو موجود في بنية الكيان.
- **النسخة (CC):** يمكنك استخدام حقل "النسخة" (CC) لإضافة مستلمين إضافيين للبريد الإلكتروني. سيتلقى المستلمين الذين يتم إضافتهم في هذا الحقل نسخة من البريد الإلكتروني الذي تم إرساله. **في هذه الحالة لسنا بحاجة إليه**.
- **النسخة المخفية (BCC):** بالإضافة إلى حقل "النسخة" (CC)، يمكنك أيضًا استخدام حقل "النسخة المخفية" (BCC) لإضافة مستلمين إضافيين بطريقة مخفية داخل البريد الإلكتروني. هذا يعني أن المستلمين الذين يتم إضافتهم في هذا الحقل سيتلقون نسخة من البريد الإلكتروني دون أن يتم رؤية أي من المستلمين الآخرين الذين تمت إضافتهم. **في هذه الحالة لسنا بحاجة إليه**.
**ملاحظة:** كل من حقل "النسخة" (CC) وحقل "النسخة المخفية" (BCC) اختياري، ويمكنك عدم استخدامهما.
- **"تفعيل إضافة رابط الكيان"**: قم بتفعيل خيار "إضافة رابط الكيان"، والذي سيقوم بإضافة رابط إلى الكيان الحالي داخل البريد الإلكتروني، مما يتيح للمستلمين الوصول إلى الكيان مباشرة.
- 
### 8. إضافة التفاعل:
بمجرد إكمال ملء نموذج التفاعل وتفاصيل الإشعار وتحديد المستلمين، انقر على الزر الموجود في نهاية النموذج لإضافة التفاعل. سيتم إضافة التفاعل إلى قائمة التفاعلات، لكنه لم يتم حفظه بعد.

### 9. حفظ التفاعل:
لحفظ التفاعل الجديد، قم بالتنقل إلى الجزء العلوي من صفحة التحرير وانقر على زر "حفظ" لحفظ جميع التغييرات التي قمت بها في  قسم "التفاعلات" بما في ذلك التفاعل الجديد.

## إرسال التقارير الدورية {#regular-report}

بعد أن تم إنشاء نظام إدارة المهام [هنا](./creating-module.md)، لنفترض أنه قد جاءنا طلب إرسال تقارير دورية عن تعيين المهام للمستخدم. لتنفيذ ذلك سنتبع الخطوات التالية:

#### 1. الانتقال إلى الكيان المعني:
   ابدأ بالانتقال إلى كيان المهام [هنا](./creating-entity.md) الذي سنقوم بإضافة التفاعل عليه.
   
#### 2. اتشاء استعلام لجمع كل المهام التي تم اسنادها للمستخدم الحالي و التي سنقوم لإرسالها في التقرير:
##### 1.2 إضافة استعلام جديد:
   - انقر على زر "+" لبدء إنشاء استعلام جديد.

##### 2.2 ملء نموذج الاستعلام:
   - سيظهر نموذج الاستعلام الجديد على شاشة منبثقة. قم بملء الحقول التالية:
     - **"حدد/النوع"**: ستتاح لك قائمة بحقول الكيان و البيانات الوصفية لاختيار المستلم. في هاته الحالة قم بتحديد خيار **المسؤول** في قسم حقول المدخل في القائمة.
     - **"العملية"**: قم بتحديد خيار **يساوي** من بين العمليات المتاحة.
     - **"المصدر"**: قم بتحديد خيار **مؤشر** في القائمة.
     - **المؤشرات**: قم بتحديد مؤشر **@me** من بين المؤشرات المتاحة.
##### 3.2 حفظ الاستعلام:
   - قم بالضغط على زر **حفظ** الموجود على أسفل يمين الشاشة المنبثقة.
   - ستظهر لك نافذة صغيرة مع حقل نص، قم بإدخال اسم الاستعلام، في هاته الحالة مثلا **"المهام المسندة إلي"**.
   - قم بإدخال الترجمة من خلال الضغط على أيقونة الترجمة في آخر الحقل.
   - اضغط على زر **حفظ** الموجود أعلى النافذة.
   
#### 3. التوجه إلى قسم "تقارير":
   انتقل إلى تبويبة التقارير التي تحتوي على جميع التقارير المرتبطة بهذا الكيان.

#### 4. إضافة تقرير جديد:
   انقر على زر **"+"** أو **"إضافة تقرير جديد"** لبدء إنشاء تقرير جديد.

#### 5. ملء نموذج التقرير:
   ستظهر صفحة إنشاء تقرير جديد على الشاشة. قم بملء الحقول التالية:
   - **العنوان:** ادخل عنوان التقرير الذي ترغب في إرساله. في هاته الحالة **"تقرير المهام المسندة"**
   - **الاستعلام:** حدد استعلام **"المهام المسندة إلي"** الذي قمت بإنشائه قبل قليل في قسم الاستعلامات ، والذي سيتم استخدامه للحصول على بيانات التقرير.
   - **الأيقونة:** يمكنك تغيير الأيقونة المعروضة للتقرير.
   - **الحقول:** حدد الحقول التي ترغب في أن تظهر في التقرير، في هاته الحالة **حدد جميع الحقول**.

#### 6. تصميم التقرير:
   في قسم "تصميم التقرير"، ستجد قائمة من الحقول المنطقية التي تسمح لك باختيار خيارات تخطيط التقرير المختلفة. وهي كالتالي :
   - **ترويسة الصفحة**: قم بتفعيل هذا الحقل.
   - **ترويسة  المؤسسة**: قم بتفعيل هذا الحقل.
   - **ترويسة  التقرير**: قم بتفعيل هذا الحقل.
     عندما تفعل خيار "ترويسة  التقرير"، سيتم عرض حقل آخر لإدخال نوع المحتوى والذي يحتوي على خيارين "نص" أو "صورة". قم بتحديد خيار النص، سيظهر حقل آخر لإدخال النص، ثم بإدخال القيمة التالية : **"تقرير المهام المسندة الدوري"**.
   -يمكنك تفعيل الخيارات التالية أيضا:
   - **تذييلة  الصفحة**
   - **تذييلة  المؤسسة**
   - **تذييلة  التقرير**
   كما هو الحال مع عنوان التقرير، عندما تختار ، سيتم عرض حقل آخر لإدخال نوع المحتوى والذي يحتوي على خيارين "نص" أو "صورة". عند اختيار أحدهما، سيظهر حقل آخر لإدخال النص أو حقل لإسقاط الصورة حسب ما اخترته من قبل.
   - **اختيار تنسيق التقرير**: قائمة منسدلة تحتوي على خيارين "رأسي" أو "أفقي". قم بتحديد خيار **أفقي**.
   **ملاحظة**: يمكنك مراجعة ترتيب التقرير بناءً على الخيارات التي اخترتها من خلال المعاينة الصغيرة التي تظهر لك على يمين الصفحة.

#### 7. تحديد الوصول:
   بعد تصميم التقرير وتحديد خيارات التنسيق، قم بالنزول إلى قسم "صلاحيات الوصول" واختر المستخدمين والمجموعات التي يمكنها الوصول إلى هذا التقرير. **في هاته الحالة سنتجاهلها**.

#### 8. إعدادات الإرسال

في قسم إعدادات الإرسال، يمكنك تحديد كيفية إرسال التفاعل الخاص بك. يحتوي قسم الإعدادات على الحقول التالية:

##### 8.1 المؤقت:
بما أننا نرغب في تكرار إرسال التقرير بانتظام كل يوم أحد من تاريخ 1/07/2023 إلى تاريخ 1/08/2023، فإننا سنعتمد اللإعدادات التالية التالية:

   - **نوع الفاصل الزمني**: قم بتحديد خيار **متكرر**. و الذي سيسمح لك بتكرار تنفيذ التفاعل بانتظام وفقًا لجدول زمني محدد.
   - **تعيين الجدولة**: قم بإدخال تعبير Cron التالي : **0 0 * * 0**، هذا التعبير يعني أنه سيتم إرسال التقرير الدوري عن المهام في تمام الساعة 12:00 منتصف الليل كل يوم أحد.
   - **تاريخ البدء**: قم بإدخال تاريخ البدء التالي : **1/07/2023**.
   - **تاريخ الإنتهاء**: قم بإدخال تاريخ الإنتهاء التالي : **1/08/2023**.

##### 8.2 نوع القناة:
   اختر نوع القناة لإرسال التفاعل. حاليًا، يتوفر خيار واحد وهو "إرسال بريد إلكتروني" (Send Email).

##### 8.3 إعدادات إرسال البريد الإلكتروني:
   عند اختيار "إرسال بريد الكتروني"، سيتم عرض حقول إضافية لإدخال تفاصيل الإرسال و هي كالتالي :
   - **الموضوع:** ادخل عنوان البريد الإلكتروني الذي ترغب في إرساله. في هاته الحالة مثلا **"تقرير المهام المسندة"**.
   - **المحتوى:** ادخل محتوى البريد الإلكتروني الذي ترغب في إرساله.في هاته الحالة مثلا **"أهلاً {{x}}، يسرنا مشاركتك تقرير المهام الأسبوعي الخاص بالمهام المسندة إليك"**.
   
   **ملاحظة**: يمكنك إضافة متغيرات خاصة في الموضوع والمحتوى من خلال كتابة اسم المتغير بين علامتي الأقواس المزدوجة {{}} (في هاته الحالة لدينا : {{x}}) بعد ذلك، سيظهر قسم آخر بالأسفل يسمح لك باختيار حقل قيمة للمتغير من حقول الكيان أو البيانات الوصفية أو مالك الخطوة الحالية (إذا كان هناك سير العمل). قم بتحديد خيار **"المسؤول"** الموجود ضمن قسم بيانات المدخل في القائمة.

   - **تحديد المستلمين** : 
   قسم المستلمين يسمح لك بتحديد مستلمي الإشعار، من خلال ملأ الحقول التالية:
   1. **المصدر:** يمكنك تحديد المصدر من بين خيارات: مستخدم، مجموعة، أو قائمة. في هاته الحالة سنحدد خيار **"مستخدم"**.
   2. **النوع:** يمكنك اختيار إما مستلم ثابت أو مستلم متغير.في هاته الحالة حدد خيار **"متغير"**
   3. **القيمة:** ستتاح لك قائمة بحقول الكيان و البيانات الوصفية لاختيار المستلم. في هاته الحالة قم بتحديد خيار **المسؤول** كما هو موجود في بنية الكيان.
   4. **النسخة (CC):** يمكنك استخدام حقل "النسخة" (CC) لإضافة مستلمين إضافيين للبريد الإلكتروني. سيتلقى المستلمين الذين يتم إضافتهم في هذا الحقل نسخة من البريد الإلكتروني الذي تم إرساله.**في هاته الحالة لسنا بحاجة إليه**.
   5. **النسخة المخفية (BCC):** بالإضافة إلى حقل "النسخة" (CC)، يمكنك أيضًا استخدام حقل "النسخة المخفية" (BCC) لإضافة مستلمين إضافيين للبريد الإلكتروني، ولكن بطريقة مخفية تمامًا. هؤلاء المستلمين لن يراهم أي مستلم آخر.**في هاته الحالة لسنا بحاجة إليه**.
   6. **تفعيل الإخطار:** إذا كنت ترغب في تمكين إشعارات التفاعل عند تنفيذه، قم بتفعيل هذا الخيار.
   7. **المرفقات:** يمكنك إضافة مرفقات إلى البريد الإلكتروني إذا كان ذلك ضروريًا.**في هاته الحالة لسنا بحاجة إلى إضافة مرفقات**.
   
##### 8.4 الحفظ:
   بعد تكوين إعدادات الإرسال وتحديد المستلمين، قم بالنزول إلى أسفل الصفحة وانقر على زر **"حفظ"**.

#### 9. تنفيذ التقرير:
   بعد حفظ الإعدادات، قم بالنقر على زر **"تنفيذ"** لبدء تنفيذ التقرير بناءً على الجدول الزمني الذي قمت بتكوينه.

#### 10. مراقبة التقارير:
   يمكنك مراقبة تقارير التقرير الدوري من خلال الانتقال إلى قسم "تقارير" والبحث عن تقريرك والاطلاع على النتائج عند تنفيذه.

هذه هي الخطوات الرئيسية لإعداد وتنفيذ تقرير دوري للمهام المسندة إلى المستخدم. يمكنك تعديل الإعدادات والمحتوى وفقًا لاحتياجاتك الخاصة.

